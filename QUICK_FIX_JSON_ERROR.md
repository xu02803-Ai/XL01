# ğŸ”§ JSON é”™è¯¯ä¿®å¤æ€»ç»“

## é—®é¢˜
```
âŒ Oops, something went wrong
Unexpected token '<', "<!DOCTYPE "... is not valid JSON
```

---

## åŸå› 
API è¿”å› HTML é”™è¯¯é¡µé¢è€Œä¸æ˜¯ JSON æ•°æ®

---

## å·²å®Œæˆçš„ä¿®å¤ âœ…

| é¡¹ç›® | æ–‡ä»¶ | å˜æ›´ |
|------|------|------|
| **API å¤„ç†å™¨** | `/api/ai-handler.ts` | âœ¨ æ–°å»º - ç»Ÿä¸€ AI API å¤„ç† |
| **å‰ç«¯æœåŠ¡** | `æ¯æ—¥ç§‘æŠ€è„‰æ app/services/geminiService.ts` | ğŸ“ æ”¹è¿›é”™è¯¯å¤„ç† |
| **ä¸»åº”ç”¨** | `æ¯æ—¥ç§‘æŠ€è„‰æ app/MainApp.tsx` | ğŸ“ æ”¹è¿›ç”¨æˆ·é”™è¯¯æç¤º |
| **ç¯å¢ƒæ–‡æ¡£** | `.env.example` | ğŸ“ æ·»åŠ  GOOGLE_AI_API_KEY |
| **è¯Šæ–­å·¥å…·** | `diagnose-json-error.sh` | âœ¨ æ–°å»º - é—®é¢˜è¯Šæ–­è„šæœ¬ |
| **ä¿®å¤æŒ‡å—** | `FIX_JSON_ERROR.md` | âœ¨ æ–°å»º - è¯¦ç»†ä¿®å¤æ­¥éª¤ |

---

## æ‚¨éœ€è¦åšä»€ä¹ˆ âš¡

### 1ï¸âƒ£ è·å– API å¯†é’¥
```
https://aistudio.google.com/app/apikey
```

### 2ï¸âƒ£ é…ç½®ç¯å¢ƒå˜é‡ (Vercel)
```
Settings â†’ Environment Variables
GOOGLE_AI_API_KEY = your_key_here
```

### 3ï¸âƒ£ é‡æ–°éƒ¨ç½²
Vercel ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²

### 4ï¸âƒ£ æµ‹è¯•
ç‚¹å‡»"ç”Ÿæˆæ–°é—»"æŒ‰é’®ï¼Œåº”è¯¥èƒ½çœ‹åˆ°æ–°é—»åˆ—è¡¨

---

## æ–°å¢ç‰¹æ€§

âœ¨ **ai-handler.ts** æ”¯æŒ:
- âœ… æ–°é—»ç”Ÿæˆ (ç§‘æŠ€è¯é¢˜)
- âœ… æ–‡æœ¬ç”Ÿæˆ
- âœ… å›¾ç‰‡æç¤ºè¯ç”Ÿæˆ
- âœ… è¯­éŸ³åˆæˆ (å ä½ç¬¦)
- âœ… è‡ªåŠ¨æ¨¡å‹é™çº§
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†

---

## æœ¬åœ°æµ‹è¯•

```bash
# è¯Šæ–­ç³»ç»Ÿ
./diagnose-json-error.sh

# æœ¬åœ°å¼€å‘
GOOGLE_AI_API_KEY=your_key npm run dev
```

---

## å¸¸è§é—®é¢˜

**Q: è¿˜æ˜¯æŠ¥ JSON é”™è¯¯?**
- A: æ£€æŸ¥ Vercel ç¯å¢ƒå˜é‡æ˜¯å¦å·²è®¾ç½®
- A: æŸ¥çœ‹æµè§ˆå™¨ F12 â†’ Console çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯

**Q: API è¿”å› 404?**
- A: `/api/ai-handler.ts` æ–‡ä»¶å·²åˆ›å»ºï¼Œåº”è¯¥èƒ½æ‰¾åˆ°

**Q: å¦‚ä½•æœ¬åœ°è°ƒè¯•?**
- A: åˆ›å»º `.env.local` æ–‡ä»¶åŒ…å« GOOGLE_AI_API_KEY
- A: è¿è¡Œ `npm install` å’Œå‰ç«¯æ„å»º

---

**ä¿®å¤å®Œæˆæ—¥æœŸ**: 2024-02-14
