# Gemini API 模型使用清单

## 📊 当前使用的模型概览

项目中目前使用 **2 个** Gemini API 模型：

### 1️⃣ `gemini-2.5-flash`（主要模型）
**用途：** 内容生成和文本处理

**使用场景：**
- 📰 **新闻生成** (`api/news.ts` 和 `每日科技脉搏 app/api/news.ts`)
  - 生成每日科技新闻摘要
  - 提取新闻关键词和摘要

- 📝 **内容生成** (`api/generate-content.ts`)
  - 生成完整的日报内容
  - 编辑和组织新闻信息
  - 支持多语言（中英文）

- 🖼️ **图片提示词生成** (`api/generate-image.ts`)
  - 根据新闻标题生成图片描述提示词
  - 提取关键词用于图片搜索

**特点：**
- ✅ 快速响应（闪电级速度）
- ✅ 成本效益高
- ✅ 支持文本输入/输出
- ✅ 适合实时应用

---

### 2️⃣ `gemini-2.5-flash-preview-tts`（语音合成模型）
**用途：** 文本转语音（Text-to-Speech）

**使用场景：**
- 🎙️ **语音合成** (`api/synthesize-speech.ts`)
  - 将日报内容转换为语音
  - 支持多种语音选择（Puck 男声, Kore 女声）
  - 生成 MP3/WAV 等音频格式

**特点：**
- ✅ 原生 TTS 功能
- ✅ 多种语音角色
- ✅ 高质量音频输出
- ✅ 预览版（Preview）- 最新技术

---

## 📋 模型使用统计

| 模型名称 | 功能类型 | 文件位置 | 优先级 |
|---------|---------|---------|-------|
| gemini-2.5-flash | 文本生成 | 3 个文件 | 🔴 高 |
| gemini-2.5-flash-preview-tts | 语音合成 | 1 个文件 | 🟡 中 |

---

## 🔄 各模型的调用流程

```
用户请求
    ↓
┌─────────────────────────────────────────┐
│                                         │
├─→ 新闻生成需求                        │
│   └─→ gemini-2.5-flash                 │
│       (生成每日新闻)                    │
│                                         │
├─→ 图片需求                            │
│   └─→ gemini-2.5-flash                 │
│       (生成图片提示词)                  │
│       └─→ Unsplash CDN                  │
│           (获取图片)                    │
│                                         │
└─→ 语音需求                            │
    └─→ gemini-2.5-flash-preview-tts     │
        (合成语音)                        │
```

---

## 🚀 模型版本说明

### gemini-2.5-flash
- **版本状态**：稳定版本
- **发布时间**：2024年最新
- **适用场景**：生产环境，高频调用
- **速度**：⚡ 最快
- **成本**：💰 最低
- **能力**：文本理解、生成、分析

### gemini-2.5-flash-preview-tts
- **版本状态**：预览版（Preview）
- **发布时间**：2024年最新
- **适用场景**：语音合成，音频生成
- **速度**：⚡⚡ 快
- **成本**：💰💰 中等
- **能力**：高质量文本转语音

---

## 💡 优化建议

### 现状分析
✅ **优点：**
- 模型选择合理，各司其职
- 文本生成用 flash（轻量快速）
- 语音合成用专用 TTS 模型
- 成本控制良好

⚠️ **可以改进：**
1. 考虑添加 `gemini-2.5-pro` 用于高质量内容（可选）
2. 监控 `gemini-2.5-flash-preview-tts` 的稳定性
3. 实现模型降级策略（如果预览版 TTS 出问题）

### 推荐方案

如果需要更高质量的内容生成，可添加：

```typescript
// 高质量内容模式（可选）
const qualityMode = "high";
const modelId = qualityMode === "high" 
  ? "gemini-2.5-pro"  // 更强大，但成本更高
  : "gemini-2.5-flash"; // 当前选择，快速经济
```

---

## 📞 API 调用成本参考

| 模型 | 输入价格 | 输出价格 | 适用量 |
|------|---------|---------|-------|
| gemini-2.5-flash | 🟢 低 | 🟢 低 | 高频 |
| gemini-2.5-flash-preview-tts | 🟡 中 | 🟡 中 | 中频 |
| gemini-2.5-pro | 🔴 高 | 🔴 高 | 低频 |

---

## 📈 使用场景统计

```
日报系统中的 Gemini 模型使用：

70% ───────────────── gemini-2.5-flash
      (新闻生成、图片词、内容处理)

30% ───────────────── gemini-2.5-flash-preview-tts
      (语音合成)
```

---

## ✅ 检查清单

使用 Gemini API 时确认：

- [ ] API 密钥已正确配置
- [ ] 模型名称拼写无误
- [ ] 请求体格式符合 API 规范
- [ ] 错误处理已实现
- [ ] 超时控制已设置
- [ ] 日志记录完整

---

## 🔗 相关文件

```
api/
├── generate-content.ts     ← gemini-2.5-flash (新闻生成)
├── generate-image.ts       ← gemini-2.5-flash (提示词)
├── synthesize-speech.ts    ← gemini-2.5-flash-preview-tts (语音)
├── news.ts                 ← gemini-2.5-flash (新闻处理)
└── user.ts                 (认证相关)

每日科技脉搏 app/
└── api/news.ts             ← gemini-2.5-flash (前端新闻接口)
```
